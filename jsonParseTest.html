<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>JSON converter</title>

	<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

	<style>
		body {
			font-family: 'Raleway', sans-serif;
		}	

	</style>
</head>
<body>
	<textarea name="oldJSON" id="oldJSON" cols="70" rows="30">
{
    "Header": [
        {
        	"Template": "L",
        	"Logo": [
	        	{
	            	"url": "/images/layout/headerLogo.png",
	            	"width": "275px",
	            	"height": "42px"
	            }
	        ],
	        "Styles": [
	        	{
	        		"height": "105px",
	        		"position": "fixed",
	        		"background-color": "rgba(0,0,0,.5)",
	        		"background-gradient": "0",
	        		"max-width": "1280px"
	        	}
	        ],
	        "Mobile": [
	        	{
	        		"height": "95px"
	        	}
	        ]
        }
    ]
} 

	</textarea>
	<textarea name="newJSON" id="newJSON" cols="70" rows="30"></textarea>
	<button id="convert">Convert</button>

<!-- 

{
    "Header": [
        {
        	"Template": "L",
        	"Logo": [
	        	{
	            	"url": "/images/layout/headerLogo.png",
	            	"width": "275px",
	            	"height": "42px"
	            }
	        ],
	        "Styles": [
	        	{
	        		"height": "105px",
	        		"position": "fixed",
	        		"background-color": "rgba(0,0,0,.5)",
	        		"background-gradient": "0",
	        		"max-width": "1280px"
	        	}
	        ],
	        "Mobile": [
	        	{
	        		"height": "95px"
	        	}
	        ]
        }
    ]
} 

-->

<!-- {
	"Header": {
		"Template": "L",
		"Logo": {
			"url": "/images/layout/headerLogo.png",
			"width": "275px",
			"height": "42px"
		},
		"Styles": {
			"height": "105px",
			"position": "fixed",
			"background-color": "rgba(0,0,0,.5)",
			"background-gradient": "0",
			"max-width": "1280px"
		},
		"Mobile": {
			"height": "95px"
		}
	}
} -->



	<!-- Go through checklist and have hidden divs  -->




	<script>

		var textareas = document.getElementsByTagName('textarea');
		var count = textareas.length;
		for(var i=0;i<count;i++){
		    textareas[i].onkeydown = function(e){
		        if(e.keyCode==9 || e.which==9){
		            e.preventDefault();
		            var s = this.selectionStart;
		            this.value = this.value.substring(0,this.selectionStart) + "\t" + this.value.substring(this.selectionEnd);
		            this.selectionEnd = s+1; 
		        }
		    }
		}

		
		document.getElementById('convert').addEventListener('click', convert);


		var lookupValues = {
			"Header.Template": "SiteHeader",
			"Header.Styles.position": "HeaderPosition",
			"Header.Logo.url": "HeaderLogoURL.logo.go.stay",
			"Header.Logo.width": "HeaderLogoURL.logo.try.me.you.zoo.b",
			//"Header.Logo.width": "HeaderLogoWidth",
			"Header.Logo.height": "HeaderLogoURL.logo.try.me.you.bee.a",
			// "Header.Logo.height": "HeaderLogoHeight",
			"Header.Styles.height": "HeaderHeight",
			"Header.Styles.background-color": "HeaderBackgroundColor",
			"Header.Styles.background-gradient": "HeaderBackgroundGrad",
			"Header.Styles.max-width": "HeaderMaxWidth",
			"Header.Mobile.height": "HeaderHeightMobile"
		};


				// valueArray = lookupValues['Header.Logo.url'].split('.');

		// console.log(valueArray.length);

		// value == 4



		// if object[valueArray[0]] exists

			//newObject = object[valueArray[0]];
			function create(object, index, valueArray) {
				if (object[valueArray[index]] && object[arrayValue[index]] != arrayValue[arrayValue.length - 1]) {
					create(object, index+1, valueArray);
				} else {
					for (var i = valueArray.length; i > indexToStopAt; i--) {

					}
				}
			}



			// if newObject[valueArray[1]] exists


			// else (need to add in check if object here)
				// var indexToStopAt = 1
				// for (var i = valueArray.length; i > indexToStopAt; i--) {
					// if (i == valueArray.length) {
						// tempOBJ = {valueArray[i-1]: valueArray[i]}
					//} else {
						// tempOBJ = {valueArray[i]: tempOBJ}
					//}
				// }
				// object[valueArray[1]] = tempOBJ;
			// endif

		// else         (this doesnt need to check if object since it's creating the first time)
			// var indexToStopAt = 0;
			// for (var i = valueArray.length; i > indexToStopAt; i--) {
				// if (i == valueArray.length) {
					// tempOBJ = {valueArray[i-1]: valueArray[i]}
				//} else {
					// tempOBJ = {valueArray[i]: tempOBJ}
				//}
			// }
			// object[valueArray[0]] = tempOBJ;
		// endif

// if object[arrayValue[next]] != arrayValue[arrayValue.length - 1]

		// if HeaderLogoURL exists
			// if headerlogourl.logo exists
				// if headerlogourl.logo.go exists
					// if headerlogourl.logo.go.went exists
						// headerlogourl.logo.go.went = value.  
					// else
						// if headerlogourl.logo.go = object
							// headerlogourl.logo.go[went] = value
						// else
							// tempOBJ = {went: value}
							// headerlogourl.logo.go = tempOBJ
						// endif
					//endif
				// else
					// if headerlogourl.logo = object
						// tempOBJ = {went: value}
						//headerlogourl.logo[go] = tempOBJ
					//else 
						// tempOBJ = {went: value}
						// tempOBJ = {go: tempOBJ}
						// headerlogourl.logo = tempOBJ
					//endif
				//endif
			// else
				// if headerlogourl = object
					// tempOBJ = {went: value}
					// tempOBJ = {go: tempOBJ}
					// headerlogourl[logo] = tempOBJ
				//else 
					// tempOBJ = {went: value}
					// tempOBJ = {go: tempOBJ}
					// tempOBJ = {logo: tempOBJ}
					// headerlogourl = tempOBJ
				//endif

				// if path = object {

				//}

				// var indexToStopAt = 1;
				// for (var i = valueArray.length; i > indexToStopAt; i--) {
					// if (i == valueArray.length) {
						// tempOBJ = {valueArray[i-1]: valueArray[i]}
					//} else {
						// tempOBJ = {valueArray[i]: tempOBJ}
					//}
				// }
				// if (valueArray[indexToStopAt] == object) {
					// object[valueArray[indexToStopAt]] = tempOBJ;       
				//}
				// object[valueArray[indexToStopAt]] = tempOBJ;




			//endif	
		// else
			// if arrayValue.length < 2 {
				// tempOBJ = {arrayValue[arrayValue.length-2]: arrayValue[arrayValue.length-1]}
			//} else {
				// var indexToStopAt = 0;
				// for (var i = valueArray.length; i > indexToStopAt; i--) {
					// if (i == valueArray.length) {
						// tempOBJ = {valueArray[i-1]: valueArray[i]}
					//} else {
						// tempOBJ = {valueArray[i]: tempOBJ}
					//}
				// }
				// object[valueArray[0]] = tempOBJ;
			//}

								// tempOBJ = {went: value}
								// tempOBJ = {go: tempOBJ}
								// tempOBJ = {logo: tempOBJ}
								// object[headerlogourl] = tempOBJ
		//endif	



		// if object[valueArray[0]] exists
			// if object[valueArray[0]].logo exists
				// if object[valueArray[0]].logo.go exists
					// if object[valueArray[0]].logo.go.went exists
						// object[valueArray[0]].logo.go.went = value.  
					// else
						// if object[valueArray[0]].logo.go = object
							// object[valueArray[0]].logo.go[went] = value
						// else
							// tempOBJ = {went: value}
							// object[valueArray[0]].logo.go = tempOBJ
						// endif
					//endif
				// else
					// if object[valueArray[0]].logo = object
						// tempOBJ = {went: value}
						//object[valueArray[0]].logo[go] = tempOBJ
					//else 
						// tempOBJ = {went: value}
						// tempOBJ = {go: tempOBJ}
						// object[valueArray[0]].logo = tempOBJ
					//endif
				//endif
			// else
				// if object[valueArray[0]] = object
					// tempOBJ = {went: value}
					// tempOBJ = {go: tempOBJ}
					// object[valueArray[0]][logo] = tempOBJ

				//else 

					// tempOBJ = {went: value}
					// tempOBJ = {go: tempOBJ}
					// tempOBJ = {logo: tempOBJ}
					// object[valueArray[0]] = tempOBJ
				//endif
				// if path = object {
				//}


			//endif	
		// else
			// if arrayValue.length > 2 {
				// tempOBJ = {arrayValue[arrayValue.length-2]: arrayValue[arrayValue.length-1]}
			//} else {
				// var indexToStopAt = 0;
				// for (var i = valueArray.length; i > indexToStopAt; i--) {
					// if (i == valueArray.length) {
						// tempOBJ = {valueArray[i-1]: valueArray[i]}
					//} else {
						// tempOBJ = {valueArray[i]: tempOBJ}
					//}
				// }
			//}

			// object[valueArray[0]] = tempOBJ


			// tempOBJ = {went: value}
			// tempOBJ = {go: tempOBJ}
			// tempOBJ = {logo: tempOBJ}
			// object[valueArray[0]] = tempOBJ
		//endif	















		// On button click, take oldJSON and parse it
		function convert() {

			// create JSON object
			var compiledJSON = '{}';
			compiledJSON = JSON.parse(compiledJSON);

			// Get oldJSON content
			var oldJSON = document.getElementById('oldJSON').value;
			var jsonOBJ = JSON.parse(oldJSON);

			var text = '';

			// this takes the JSON object and loops through it
			loopThrough(jsonOBJ);

			function loopThrough(object) {

				// Get amount of top level values
				var count = Object.keys(object).length;

				// if more than 0
				if (count > 0) {

					// while there are keys in object
					for (var i = 0; i < count; i++) {

						// get key name
						var key = Object.keys(object)[i];

						// get value of key
						var lowerKey = object[key];

						// if value is object or array go through it
						if (typeof lowerKey != 'string') {

							// remove 0s
							if (isNaN(key)){
								// begin path
								text += key + '.';
							}
							// if value is an object then loop through it too
							loopThrough(lowerKey);

							// remove 0s
							if (isNaN(key)){
								// remove path once back at this level
								text = text.replace(key + '.', '');
							}

						// if value is string
					    } else {

					    	// since the value is a string, the we can then lookup the values
					    	var lookupKey = text + key;
					    	//console.log(key);

					    	console.log(text + key + ' = ' + lowerKey);

					    	var value = lookupValues[lookupKey];
					    	if (!value) {
					    		// console.log(lookupKey + " needs added to the lookupValues");
					    	} else {
					    		// console.log(value +"   :   "+ lookupKey);
					    	}

					    	//console.log(value);

					    	// if value can be split into array
					    	if (value && value.indexOf('.') !== -1) {

					    		valueArray = value.split('.');
					    		value = '';
					    		var obj = '';
					    		var tempOBJ = '';


					    	// 	if (completeObjectPath[valueArray[4 GOES UP 1]]) {
			    			// 		completeObjectPath = completeObjectPath[valueArray[4 GOES UP 1]];

				    		// 	} else {
				    		// 		var indexToStopAt = 5 GOES UP 1;
				    		// 		if (valueArray.length == indexToStopAt) {
										// compiledJSON[valueArray[0]][valueArray[1]][valueArray[2]][valueArray[3]][valueArray[4]] ONE GETS ADDED = lowerKey;
				    		// 		} else {
				    		// 			for (var v = valueArray.length; v > indexToStopAt; v--) {
										// 	if (v == valueArray.length) {
										// 		tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
										// 	} else {
										// 		tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
										// 	}
										// }
										
										// tempOBJ = JSON.parse(tempOBJ);
										// compiledJSON[valueArray[0]][valueArray[1]][valueArray[2]][valueArray[3]][valueArray[4]] ONE GETS 1= tempOBJ;
				    		// 		}
				    		// 	}



				    		// SHOULD WORK
				    		function checkAndCreate(completeObjectPath, valueArray, indexToStopAt) {
				    			if (completeObjectPath[valueArray[indexToStopAt-1]]) {
			    					completeObjectPath = completeObjectPath[valueArray[indexToStopAt-1]];
			    					checkAndCreate(completeObjectPath, valueArray, indexToStopAt + 1);
				    			} else {
				    				if (valueArray.length == indexToStopAt) {
										completeObjectPath[valueArray[indexToStopAt-1]] = lowerKey;
										return true;
				    				} else {
				    					for (var v = valueArray.length; v > indexToStopAt; v--) {
											if (v == valueArray.length) {
												tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
											} else {
												tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
											}
										}
										
										tempOBJ = JSON.parse(tempOBJ);
										completeObjectPath[valueArray[indexToStopAt-1]] = tempOBJ;
				    				}
				    			}
				    		}





					    		if (compiledJSON[valueArray[0]]) {

					    			completeObjectPath = compiledJSON[valueArray[0]];

					    			checkAndCreate(completeObjectPath, valueArray, 2);


								} else {

									var indexToStopAt = 1;
									for (var v = valueArray.length; v > indexToStopAt; v--) {
										if (v == valueArray.length) {
											tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
										} else {
											tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
										}
									}
									
									tempOBJ = JSON.parse(tempOBJ);
									compiledJSON[valueArray[indexToStopAt-1]] = tempOBJ;
								}




								// WORKING
								// if (compiledJSON[valueArray[0]]) {

					   //  			completeObjectPath = compiledJSON[valueArray[0]];

					   //  			if (completeObjectPath[valueArray[1]]) {
					   //  				completeObjectPath = completeObjectPath[valueArray[1]];

						  //   			if (completeObjectPath[valueArray[2]]) {
						  //   				completeObjectPath = completeObjectPath[valueArray[2]];

						  //   				if (completeObjectPath[valueArray[3]]) {
						  //   					completeObjectPath = completeObjectPath[valueArray[3]];

						  //   					if (completeObjectPath[valueArray[4]]) {
							 //    					completeObjectPath = completeObjectPath[valueArray[4]];

								//     			} else {
								//     				var indexToStopAt = 5;
								//     				if (valueArray.length == indexToStopAt) {
								// 						completeObjectPath[valueArray[indexToStopAt-1]] = lowerKey;
								//     				} else {
								//     					for (var v = valueArray.length; v > indexToStopAt; v--) {
								// 							if (v == valueArray.length) {
								// 								tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
								// 							} else {
								// 								tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
								// 							}
								// 						}
														
								// 						tempOBJ = JSON.parse(tempOBJ);
								// 						completeObjectPath[valueArray[indexToStopAt-1]] = tempOBJ;
								//     				}
								//     			}

							 //    			} else {
							 //    				var indexToStopAt = 4;
							 //    				if (valueArray.length == indexToStopAt) {
								// 					completeObjectPath[valueArray[indexToStopAt-1]] = lowerKey;
							 //    				} else {
							 //    					for (var v = valueArray.length; v > indexToStopAt; v--) {
								// 						if (v == valueArray.length) {
								// 							tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
								// 						} else {
								// 							tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
								// 						}
								// 					}
													
								// 					tempOBJ = JSON.parse(tempOBJ);
								// 					completeObjectPath[valueArray[indexToStopAt-1]] = tempOBJ;
							 //    				}
							 //    			}
						  //   			} else {
						  //   				var indexToStopAt = 3;
						  //   				if (valueArray.length == indexToStopAt) {
								// 				completeObjectPath[valueArray[indexToStopAt-1]] = lowerKey;
							 //    			} else {
								// 				for (var v = valueArray.length; v > indexToStopAt; v--) {
								// 					if (v == valueArray.length) {
								// 						tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
								// 					} else {
								// 						tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
								// 					}
								// 				}
												
								// 				tempOBJ = JSON.parse(tempOBJ);
								// 				completeObjectPath[valueArray[indexToStopAt-1]] = tempOBJ;
						  //   				}
						  //   			}

					   //  			} else {
					   //  				var indexToStopAt = 2;
					   //  				if (valueArray.length == indexToStopAt) {
								// 			completeObjectPath[valueArray[indexToStopAt-1]] = lowerKey;
							 //    		} else {
								// 			for (var v = valueArray.length; v > indexToStopAt; v--) {
								// 				if (v == valueArray.length) {
								// 					tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
								// 				} else {
								// 					tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
								// 				}
								// 			}
											
								// 			tempOBJ = JSON.parse(tempOBJ);
								// 			completeObjectPath[valueArray[indexToStopAt-1]] = tempOBJ;
								// 		}
					   //  			}
								// } else {

								// 	var indexToStopAt = 1;
								// 	for (var v = valueArray.length; v > indexToStopAt; v--) {
								// 		if (v == valueArray.length) {
								// 			tempOBJ = '{"'+ valueArray[v-1] +'": "'+ lowerKey +'"}';
								// 		} else {
								// 			tempOBJ = '{"'+ valueArray[v-1] +'": '+tempOBJ+'}';
								// 		}
								// 	}
									
								// 	tempOBJ = JSON.parse(tempOBJ);
								// 	compiledJSON[valueArray[indexToStopAt-1]] = tempOBJ;
								// }





					    		// if first value not set, create objects.  else check if second value is set
					    		// if (!compiledJSON[valueArray[0]]) {
					    		// 	// console.log("lvl 0  "+obj + "   " + valueArray);
					    		// 	// console.log(obj);
					    		// 	createObjects(valueArray, 0);
					    		// } else {

					    		// 	obj = compiledJSON[valueArray[0]];
					    		// 	console.log(obj);

					    		// 	obj = compiledJSON[valueArray[0]];
					    		// 	if (obj[valueArray[1]] !== null && typeof obj[valueArray[1]] === 'object') {
					    		// 		console.log("lvl 1  "+obj + "   " + valueArray);
						    	// 		console.log(obj);
						    	// 		if (!obj[valueArray[1]]) {
							    // 			createObjects(valueArray, 1);
							    // 		} else {
							    // 			obj = obj[valueArray[1]];
							    // 			if (obj[valueArray[2]] !== null && typeof obj[valueArray[2]] === 'object') {
							    // 				console.log("lvl 2  "+obj + "   " + valueArray);
								   //  			console.log(obj);
								   //  			if (!obj[valueArray[2]]) {
									  //   			createObjects(valueArray, 2);
									  //   		} else {
									  //   			obj = obj[valueArray[2]];
									  //   			if (obj[valueArray[3]] !== null && typeof obj[valueArray[3]] === 'object') {
									  //   				console.log("lvl 3  "+obj + "   " + valueArray);
										 //    			console.log(obj);
										 //    			if (!obj[valueArray[3]]) {
											//     			createObjects(valueArray, 3);
											//     		} else {
											//     			obj = obj[valueArray[3]];
											//     			if (obj[valueArray[4]] !== null && typeof obj[valueArray[4]] === 'object') {
											//     				console.log("lvl 4  "+obj + "   " + valueArray);
											// 	    			console.log(obj);
											// 	    			if (!obj[valueArray[4]]) {
											// 		    			createObjects(valueArray, 4);
											// 		    		}
											//     			}
											//     		}
									  //   			}
									  //   		}
								   //  		}
							    // 		}
							    // 	}
					    		// } // end of if (!compiledJSON[valueArray[0]]) 


					    		// create objects:
					    		// function createObjects(valueArray, indexToStopAt) {
					    		// 	var tempOBJ = '';
					    		// 	var length = valueArray.length - 1;
					    		// 	var lastOne = valueArray.length - 1;

					    		// 	if (length > 1) {
						    	// 		for (var i = length; i > indexToStopAt; i--) {

						    	// 			if (i == lastOne) {
						    	// 				tempOBJ = '{"'+valueArray[i]+'": "'+lowerKey+'"}';
						    	// 			} else {
					    		// 				tempOBJ = '{"'+valueArray[i]+'": '+tempOBJ+'}';
					    		// 				// This will make arrays and [0] necessary.  need to see how the actual config is tempOBJ = '{"'+valueArray[i]+'": ['+tempOBJ+']}';
						    	// 			}	
							    // 			if (i == indexToStopAt) {
							    // 				break;
							    // 			}				    				
							    // 		}

							    // 		if (i == 0) {
						    	// 				tempOBJ = JSON.parse(tempOBJ);
						    	// 				compiledJSON[valueArray[0]] = tempOBJ;
						    	// 			} else {
						    	// 				if (i == 1) {
							    // 					tempOBJ = JSON.parse(tempOBJ);
							    // 					compiledJSON[valueArray[0]][valueArray[1]] = tempOBJ;
							    // 				} else {
							    // 					if (i == 2) {
								   //  					tempOBJ = JSON.parse(tempOBJ);
								   //  					compiledJSON[valueArray[0]][valueArray[1]][valueArray[2]] = tempOBJ;
								   //  				} else {
								   //  					if (i == 3) {
									  //   					tempOBJ = JSON.parse(tempOBJ);
									  //   					compiledJSON[valueArray[0]][valueArray[1]][valueArray[2]][valueArray[3]] = tempOBJ;
									  //   				} else {
									  //   					if (i == 4) {
										 //    					tempOBJ = JSON.parse(tempOBJ);
										 //    					compiledJSON[valueArray[0]][valueArray[1]][valueArray[2]][valueArray[3]][valueArray[4]] = tempOBJ;
										 //    				}
									  //   				}
								   //  				}	
							    // 				}	
						    	// 			}
						    	// 	} else {
						    	// 		tempOBJ = '{"'+valueArray[1]+'": "'+lowerKey+'"}';
						    	// 	}

						    	// 	tempOBJ = JSON.parse(tempOBJ);
						    	// 	console.log(tempOBJ);
						    	// 	compiledJSON[valueArray[indexToStopAt]] = tempOBJ;
					    		// } // end function createObjects(valueArray, indexToStopAt)

					    	} else {
					    		if (value) {
					    			compiledJSON[value] = lowerKey;
					    		}
					    	} // end of if (value && value.indexOf('.') !== -1) 

						} // end if typeof lowerKey != 'string'

					} // end of for var i = 0; i < count; i++
					return;
				} // if (count > 0)

			} // end of function loopThrough

			var jsonPretty = JSON.stringify(compiledJSON, null, 4);

			document.getElementById('newJSON').value = jsonPretty;
		} // end of function convert

	</script>

</body>
</html>
























